{"version":3,"sources":["panels/Home.js","panels/Loading.js","panels/Result.js","panels/Info.js","People.js","App.js","index.js"],"names":["Home","id","go","userLink","onInput","infoClick","people","snackbar","top","type","value","placeholder","stretched","size","mode","onClick","before","href","target","header","Loading","text","relProgress","total","subheader","Result","users","name","back","share","bannerProps","left","level","weight","length","bannerData","style","margin","display","Info","People","App","useState","activePanel","setActivePanel","token","setToken","popout","setPopout","snackBar","setSnackBar","setLink","userId","setUserId","progress","setProgress","loadingTotal","setTotal","loadingText","setLoadingText","setUsers","resultName","setResultName","setPeople","resState","setResState","sex","setSex","setBannerProps","result","api_v","cancelled","lessFriends","filteredFriends1","filteredFriends2","filteredOwner1","filteredOwner2","useEffect","bridge","subscribe","detail","data","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","scope","access_token","selectPeople","actions","title","autoclose","actionsLayout","onClose","receiveToken","send","ad_format","then","rand","min","max","Math","random","round","atoken","ar","cells","i","push","join","u","response","fol","followers_count","undefined","src","photo_100","badge","verified","choosePerson","description","first_name","last_name","showFullList","expandable","catch","error","handleApiError","a","background","fill","width","height","showError","hidePopout","cancel","console","log","error_type","error_data","error_code","error_msg","error_reason","step1","uid","sleep","friend_status","finish","step2","step3","source","another","len","items","m","flag","slice","filterUsers","j","c","common_count","common_friends","step4","list1","list2","list2Owner","step5","less","more","lessUid","step5List","concat","p","list","y","owner","ms","Promise","resolve","setTimeout","is_closed","can_access_closed","deactivated","e","spl","split","screenName","count","object_id","canBe","code","res","encodeURI","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.878c70e5.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Panel, PanelHeader, Header, Button, Group, Div, FormItem, Input, CellButton, Link } from '@vkontakte/vkui';\nimport { Icon28InfoCircleOutline, Icon28UsersOutline } from '@vkontakte/icons';\n\nconst Home = ({ id, go, userLink, onInput, infoClick, people, snackbar }) => (\n\t<Panel id={id}>\n\t\t<PanelHeader>Теория рукопожатий</PanelHeader>\n\n\t\t<Group>\n\t\t\t<FormItem top=\"Ссылка на пользователя\">\n\t\t\t\t<Input type=\"text\" value={userLink} onInput={onInput} placeholder='https://vk.com/eeoneguy' />\n\t\t\t</FormItem>\n\t\t\t<Div>\n\t\t\t\t<Button stretched size=\"l\" mode=\"primary\" onClick={go}>\n\t\t\t\t\tУзнать\n\t\t\t\t</Button>\n\t\t\t</Div>\n\t\t</Group>\n\t\t<Group>\n\t\t\t<CellButton before={<Icon28InfoCircleOutline />} onClick={infoClick}>Что это?</CellButton>\n\t\t\t<Link href=\"https://vk.com/handshakes_app\" target=\"_blank\"><CellButton before={<Icon28UsersOutline />}>Группа ВКонтакте</CellButton></Link>\n\t\t</Group>\n\t\t<Group header={<Header mode=\"secondary\">Известные личности</Header>}>\n\t\t\t{people}\n\t\t</Group>\n\t\t{snackbar}\n\t</Panel>\n);\n\nexport default Home;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, Progress, Group, Div, Header, Button, Banner } from '@vkontakte/vkui';\r\n\r\nconst Loading = ({ id, text, relProgress, total }) => (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader>\r\n\t\t\tЗагрузка...\r\n\t\t</PanelHeader>\r\n\t\t<Group header={<Header mode=\"secondary\">{text} {relProgress}/{total}</Header>}>\r\n\t\t\t<Div>\r\n\t\t\t\t<Progress value={relProgress / (total/100)} />\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n\t\t<Group>\r\n\t\t\t<Banner\r\n\t\t\t\theader=\"Загрузка может занять немного времени\"\r\n\t\t\t\tsubheader=\"Не закрывайте приложение. В случае возникновения ошибки, приложение сообщит об этом.\"\r\n\t\t\t  />\r\n\t\t</Group>\r\n\t</Panel>\r\n);\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, Group, Div, Title, List, Button, Separator, PanelHeaderBack, PromoBanner } from '@vkontakte/vkui';\r\nimport { Icon32StoryOutline, Icon28CancelAltOutline } from '@vkontakte/icons';\r\n\r\nconst Result = ({ id, users, name, back, share, bannerProps }) => (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader left={<PanelHeaderBack onClick={back} />}>\r\n\t\t\tРезультат\r\n\t\t</PanelHeader>\r\n\t\t<Group>\r\n\t\t\t<Div>\r\n\t\t\t\t<Title level=\"1\" weight=\"bold\">Вы знакомы с {name} через {users.length-1} {(users.length-1) == 5 ? 'рукопожатий' : (users.length-1) == 1 ? 'рукопожатие' : 'рукопожатия'}</Title>\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n\t\t<Group>\r\n\t\t\t<List>\r\n\t\t\t\t{users}\r\n\t\t\t\t\t{bannerProps && <PromoBanner bannerData={ bannerProps } />}\r\n\t\t\t</List>\r\n\t\t</Group>\r\n\t\t<Separator style={{ margin: '12px 0' }} />\r\n\t\t<Div style={{display: 'flex'}}>\r\n\t\t   <Button size=\"l\" stretched before={<Icon32StoryOutline />} onClick={share}>Поделиться</Button>\r\n\t\t </Div>\r\n\t</Panel>\r\n);\r\n\r\nexport default Result;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, Group, Div, PanelHeaderBack, Text, Spacing } from '@vkontakte/vkui';\r\n\r\nconst Info = ({ id, back }) => (\r\n\t<Panel id={id}>\r\n\t\t<PanelHeader left={<PanelHeaderBack onClick={back} />}>\r\n\t\t\tЧто это?\r\n\t\t</PanelHeader>\r\n\t\t<Group>\r\n\t\t\t<Div>\r\n\t\t\t\t<Text weight='regular'><b>Теория рукопожатий</b> — социологическая теория, согласно которой каждый человек опосредованно знаком с любым другим жителем планеты через цепочку общих знакомых, в среднем состоящую из пяти человек.</Text>\r\n\t\t\t\t<Spacing />\r\n\t\t\t\t<Text weight='regular'>Это приложение позволяет определить, какое количество друзей отделяет вас от знакомства с любым другим пользователем ВК.</Text>\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n\t</Panel>\r\n);\r\n\r\nexport default Info;\r\n","const People = [53636214, 279938622, 53083705, 38940203, 34347140, 129244038, 32707600, 55325758, 10659940, 19902804, 503319088, 59511958, 273251945, 20020126, 5592362, 39377403, 45269508, 169902419, 2677959, 44625516, 100897602, 115534183, 51663629, 81133993, 209991765, 164542053, 176250659, 1150167, 2598011, 27802750, 517356333, 379012207, 249338557, 12472209, 222267609, 13458042, 167759856, 355423138, 47903500, 363887574, 399053643, 313130351, 240651878, 14720997, 16027025, 87800684, 473989916, 21839417, 138869642, 34892163, 600019195, 23379958, 3119276, 1770436, 470483, 547152729];\r\n\r\nexport default People;","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot, Alert, SimpleCell, Avatar, Link, Snackbar } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { Icon12Verified, Icon16Done, Icon28MenuOutline } from '@vkontakte/icons';\n\nimport Home from './panels/Home';\nimport Loading from './panels/Loading';\nimport Result from './panels/Result';\nimport Info from './panels/Info';\nimport People from './People';\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [token, setToken] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst [snackBar, setSnackBar] = useState(null);\n\tconst [userLink, setLink] = useState('');\n\tconst [userId, setUserId] = useState(null);\n\tconst [progress, setProgress] = useState(0);\n\tconst [loadingTotal, setTotal] = useState(0);\n\tconst [loadingText, setLoadingText] = useState('');\n\tconst [users, setUsers] = useState([]);\n\tconst [resultName, setResultName] = useState(null);\n\tconst [people, setPeople] = useState([]);\n\tconst [resState, setResState] = useState(null);\n\tconst [sex, setSex] = useState(0);\n\tconst [bannerProps, setBannerProps] = useState(null);\n\t\n\tconst result = [];\n\t\n\tconst api_v = '5.131';\n\t\n\tlet cancelled = false;\n\t\n\tlet lessFriends = null;\n\tlet filteredFriends1 = null;\n\tlet filteredFriends2 = null;\n\tlet filteredOwner1 = null;\n\tlet filteredOwner2 = null;\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tswitch(type){\n\t\t\t\tcase 'VKWebAppUpdateConfig':\n\t\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tsetUserId(data.id);\n\t\t\t\t\tsetSex(data.sex);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tif(data.scope == 'friends'){\n\t\t\t\t\t\tsetToken(data.access_token);\n\t\t\t\t\t\tselectPeople(data.access_token);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tsetPopout(<Alert\n\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t  title: 'ОК',\n\t\t\t\t\t\t  autoclose: true,\n\t\t\t\t\t\t  mode: 'cancel'\n\t\t\t\t\t\t}]}\n\t\t\t\t\t\tactionsLayout=\"vertical\"\n\t\t\t\t\t\tonClose={receiveToken}\n\t\t\t\t\t\theader=\"Ошибка\"\n\t\t\t\t\t\ttext=\"Приложению необходим доступ к друзьям\"\n\t\t\t\t\t  />);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppGetAuthTokenFailed':\n\t\t\t\t\tsetPopout(<Alert\n\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t  title: 'ОК',\n\t\t\t\t\t\t  autoclose: true,\n\t\t\t\t\t\t  mode: 'cancel'\n\t\t\t\t\t\t}]}\n\t\t\t\t\t\tactionsLayout=\"vertical\"\n\t\t\t\t\t\tonClose={receiveToken}\n\t\t\t\t\t\theader=\"Ошибка\"\n\t\t\t\t\t\ttext=\"Приложению необходим доступ к друзьям\"\n\t\t\t\t\t  />);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tbridge.send(\"VKWebAppGetUserInfo\");\n\t\tbridge.send(\"VKWebAppShowNativeAds\", {ad_format:\"preloader\"});\n\t\tbridge.send(\"VKWebAppGetAds\")\n\t\t\t.then(data => {\n\t\t\t\tsetBannerProps(data);\n\t\t\t});\n\t\treceiveToken();\n\t}, []);\n\t\n\tconst receiveToken = () => {\n\t\tsetPopout(<ScreenSpinner size='large' />);\n\t\tbridge.send('VKWebAppGetAuthToken', {\"app_id\": 7900221, \"scope\": \"friends\"});\n\t}\n\t\n\tconst onInput = e => {\n\t\tsetLink(e.target.value);\n\t}\n\t\n\tconst rand = (min,max) => {\n\t\tlet rand = min - 0.5 + Math.random() * (max - min + 1);\n\t\treturn Math.round(rand);\n\t}\n\t\n\tconst selectPeople = (atoken) => {\n\t\tlet ar = [];\n\t\tlet cells = [];\n\t\tfor(let i = 0; i < 15; i++){\n\t\t\tar.push(People[rand(0,People.length)]);\n\t\t}\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": ar.join(','), \"fields\": \"photo_100,verified,followers_count\", \"v\": api_v, \"access_token\": atoken}})\n\t\t\t.then(data => {\n\t\t\t\tfor(let i = 0; i < data.response.length; i++){\n\t\t\t\t\tlet u = data.response[i];\n\t\t\t\t\tlet fol = u.followers_count;\n\t\t\t\t\tif(fol >= 1000000) fol = Math.round(fol/1000000)+'M';\n\t\t\t\t\tif(fol >= 10000) fol = Math.round(fol/1000)+'K';\n\t\t\t\t\tif(fol == undefined || fol == 0) fol = 'Нет';\n\t\t\t\t\tcells.push(<SimpleCell key={'p'+u.id} before={<Avatar size={48} src={u.photo_100} />} badge={u.verified ? <Icon12Verified /> : null} onClick={() => choosePerson(u.id)} description={fol+' подписчиков'}>{u.first_name} {u.last_name}</SimpleCell>);\n\t\t\t\t}\n\t\t\t\tcells.push(<SimpleCell key='more' onClick={() => showFullList(atoken)} expandable before={<Icon28MenuOutline />}>Весь список</SimpleCell>);\n\t\t\t\tsetPeople(cells);\n\t\t\t\tsetPopout(null);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t\tsetPopout(null);\n\t\t\t});\n\t}\n\t\n\tconst choosePerson = async id => {\n\t\tsetLink('https://vk.com/id'+id);\n\t\tsetSnackBar(<Snackbar\n\t\t\t\t\tonClose={() => setSnackBar(null)}\n\t\t\t\t\tbefore={<Avatar size={24} style={{ background: 'var(--accent)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}>\n\t\t\t\t\tСсылка вставлена. Нажмите \"Узнать\"\n\t\t\t\t  </Snackbar>);\n\t}\n\t\n\tconst showFullList = (atoken) => {\n\t\tsetPopout(<ScreenSpinner size='large' />);\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": People.join(','), \"fields\": \"photo_100,verified,followers_count\", \"v\": api_v, \"access_token\": atoken}})\n\t\t\t.then(data => {\n\t\t\t\tlet cells = [];\n\t\t\t\tfor(let i = 0; i < data.response.length; i++){\n\t\t\t\t\tlet u = data.response[i];\n\t\t\t\t\tlet fol = u.followers_count;\n\t\t\t\t\tif(fol >= 1000000) fol = Math.round(fol/1000000)+'M';\n\t\t\t\t\tif(fol >= 10000) fol = Math.round(fol/1000)+'K';\n\t\t\t\t\tif(fol == undefined || fol == 0) fol = 'Нет';\n\t\t\t\t\tcells.push(<SimpleCell key={'p'+u.id} before={<Avatar size={48} src={u.photo_100} />} badge={u.verified ? <Icon12Verified /> : null} onClick={() => choosePerson(u.id)} description={fol+' подписчиков'}>{u.first_name} {u.last_name}</SimpleCell>);\n\t\t\t\t}\n\t\t\t\tsetPeople(cells);\n\t\t\t\tsetPopout(null);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t\tsetPopout(null);\n\t\t\t});\n\t}\n\n\tconst go = e => {\n\t\tif(userId == null) bridge.send(\"VKWebAppGetUserInfo\");\n\t\tif(token == null){\n\t\t\treceiveToken();\n\t\t\treturn;\n\t\t}\n\t\tsetPopout(<ScreenSpinner size='large' />);\n\t\tsetSnackBar(null);\n\t\tlet spl = userLink.split('/');\n\t\tlet screenName = spl[spl.length-1];\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.get\", \"params\":{\"count\": 1, \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(data => {\n\t\t\t\tif(data.response.count > 0){\n\t\t\t\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"utils.resolveScreenName\", \"params\":{\"screen_name\":screenName, \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\tif(data.response.type == 'user'){\n\t\t\t\t\t\t\t\tlet canBe = await bridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.canBeAnalyzed\", \"params\":{\"uid\": data.response.object_id, \"v\": api_v, \"access_token\": token}});\n\t\t\t\t\t\t\t\tif(canBe.response.code == 1){\n\t\t\t\t\t\t\t\t\tsetActivePanel('loading');\n\t\t\t\t\t\t\t\t\tstep1(data.response.object_id);\n\t\t\t\t\t\t\t\t\tsetResultName(canBe.response.res);\n\t\t\t\t\t\t\t\t\tsetPopout(null);\n\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\tshowError(canBe.response.res);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\tshowError('Пользователь не найден');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t});\n\t\t\t\t} else{\n\t\t\t\t\tshowError('У вас нет друзей ВК');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t};\n\t\n\tconst showError = text => {\n\t\tsetPopout(<Alert\n\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t  title: 'ОК',\n\t\t\t\t\t\t  autoclose: true,\n\t\t\t\t\t\t  mode: 'cancel'\n\t\t\t\t\t\t}]}\n\t\t\t\t\t\tonClose={hidePopout}\n\t\t\t\t\t\tactionsLayout=\"vertical\"\n\t\t\t\t\t\theader=\"Ошибка\"\n\t\t\t\t\t\ttext={text}\n\t\t\t\t\t  />);\n\t}\n\t\n\tconst hidePopout = () => {\n\t\tsetPopout(null);\n\t}\n\t\n\tconst handleApiError = error => {\n\t\tcancel();\n\t\tconsole.log(error);\n\t\tswitch(error.error_type){\n\t\t\tcase 'api_error':\n\t\t\t\tswitch(error.error_data.error_code){\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tshowError('Ошибка 6: слишком много запросов в секунду. Подождите несколько минут и попробуйте снова');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 29:\n\t\t\t\t\t\tshowError('Ошибка 29: достигнут лимит запросов. Похоже, вы пользовались сервисом слишком активно. Это ограничение со стороны ВК. Подождите несколько часов и попробуйте снова.');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tshowError('API error: '+error.error_data.error_code+' - '+error.error_data.error_msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'client_error':\n\t\t\t\tswitch(error.error_data.error_reason.error_code){\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tshowError('Ошибка 6: слишком много запросов в секунду. Подождите несколько минут и попробуйте снова');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 29:\n\t\t\t\t\t\tshowError('Ошибка 29: достигнут лимит запросов. Похоже, вы пользовались сервисом слишком активно. Это ограничение со стороны ВК. Подождите несколько часов и попробуйте снова.');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tshowError('Client error: '+error.error_data.error_reason.error_code+' - '+error.error_data.error_reason.error_msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tshowError(error.error_type);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\tconst step1 = async uid => {\n\t\tcancelled = false;\n\t\tsetLoadingText('Проверка на прямую дружбу:');\n\t\tsetTotal(1);\n\t\tsetProgress(0);\n\t\tresult.push(userId);\n\t\tawait sleep(2000);\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.areFriends\", \"params\":{\"user_ids\": uid, \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(async data => {\n\t\t\t\tif(data.response[0].friend_status == 3){\n\t\t\t\t\tresult.push(uid);\n\t\t\t\t\tsetProgress(1);\n\t\t\t\t\tfinish();\n\t\t\t\t} else{\n\t\t\t\t\tif(!cancelled) step2(uid);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t}\n\t\n\tconst step2 = uid => {\n\t\tif(cancelled) return;\n\t\tsetLoadingText('Проверка общих друзей:');\n\t\tsetTotal(1);\n\t\tsetProgress(0);\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.getMutual\", \"params\":{\"source_uid\": userId, \"target_uid\": uid, \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(data => {\n\t\t\t\tif(data.response.length > 0){\n\t\t\t\t\tsetProgress(1);\n\t\t\t\t\tresult.push(data.response[0]);\n\t\t\t\t\tresult.push(uid);\n\t\t\t\t\tfinish();\n\t\t\t\t} else{\n\t\t\t\t\tif(!cancelled) step3(uid);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t}\n\t\n\tconst step3 = uid => {\n\t\tif(cancelled) return;\n\t\tsetLoadingText('Получаем списки друзей:');\n\t\tsetTotal(1);\n\t\tsetProgress(0);\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.getLessFriends\", \"params\":{\"uid1\": uid, \"uid2\": userId, \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(async data => {\n\t\t\t\tsetProgress(1);\n\t\t\t\tlet source = data.response.another;\n\t\t\t\tlessFriends = data.response;\n\t\t\t\tlet len = data.response.items.length;\n\t\t\t\tsetLoadingText('Фильтруем список:');\n\t\t\t\tsetTotal(len);\n\t\t\t\tsetProgress(0);\n\t\t\t\tlet m = 0;\n\t\t\t\tlet another = data.response.another;\n\t\t\t\tlet flag = false;\n\t\t\t\twhile(m < data.response.items.length){\n\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\tawait sleep(2000);\n\t\t\t\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": data.response.items.slice(m, m+1000).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\tif(m > len) setProgress(len)\n\t\t\t\t\t\t\telse setProgress(m);\n\t\t\t\t\t\t\tfilteredFriends1 = filterUsers(data.response);\n\t\t\t\t\t\t\tif(another == uid){\n\t\t\t\t\t\t\t\tfilteredOwner1 = userId;\n\t\t\t\t\t\t\t\tfilteredOwner2 = uid;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tfilteredOwner1 = uid;\n\t\t\t\t\t\t\t\tfilteredOwner2 = userId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\tlet length = filteredFriends1.length;\n\t\t\t\t\t\t\tsetLoadingText('Получаем общих друзей:');\n\t\t\t\t\t\t\tsetTotal(length);\n\t\t\t\t\t\t\tsetProgress(0);\n\t\t\t\t\t\t\twhile(i < length){\n\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.getMutual\", \"params\":{\"source_uid\": source, 'target_uids': filteredFriends1.slice(i, i+100).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\t\t\t\tif(i > length) setProgress(length)\n\t\t\t\t\t\t\t\t\t\telse setProgress(i);\n\t\t\t\t\t\t\t\t\t\tfor(let j = 0; j < data.response.length; j++){\n\t\t\t\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\t\t\t\tlet c = data.response[j];\n\t\t\t\t\t\t\t\t\t\t\tif(c.common_count > 0){\n\t\t\t\t\t\t\t\t\t\t\t\tflag = true;\n\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.isBanned\", \"params\":{\"uid\": c.common_friends[0], \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(data.response == 0){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetProgress(length);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(source == uid){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(uid);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfinish();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!flag && i+100 >= length && !cancelled) step4(uid);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(!flag && i+100 >= length && !cancelled) step4(uid);\n\t\t\t\t\t\t\t\ti = i+100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t});\n\t\t\t\t\tm = m+1000;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t}\n\t\n\tconst step4 = uid => {\n\t\tif(cancelled) return;\n\t\tsetLoadingText('Получаем списки друзей:');\n\t\tsetTotal(1);\n\t\tsetProgress(0);\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.get\", \"params\":{\"user_id\": lessFriends.another, \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(async data => {\n\t\t\t\tsetProgress(1);\n\t\t\t\tlet len = data.response.items.length;\n\t\t\t\tsetLoadingText('Фильтруем список:');\n\t\t\t\tsetTotal(len);\n\t\t\t\tsetProgress(0);\n\t\t\t\tlet m = 0;\n\t\t\t\tlet flag = false;\n\t\t\t\twhile(m < data.response.items.length){\n\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\tawait sleep(2000);\n\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": data.response.items.slice(m, m+1000).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\tif(m > len) setProgress(len)\n\t\t\t\t\t\t\telse setProgress(m);\n\t\t\t\t\t\t\tfilteredFriends2 = filterUsers(data.response);\n\t\t\t\t\t\t\tlet list1 = filteredFriends1;\n\t\t\t\t\t\t\tlet list2 = filteredFriends2;\n\t\t\t\t\t\t\tlet list2Owner = filteredOwner2;\n\t\t\t\t\t\t\tif(filteredFriends1.length <= filteredFriends2.length){\n\t\t\t\t\t\t\t\tlist1 = filteredFriends2;\n\t\t\t\t\t\t\t\tlist2 = filteredFriends1;\n\t\t\t\t\t\t\t\tlist2Owner = filteredOwner1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetLoadingText('Получаем общих друзей:');\n\t\t\t\t\t\t\tsetTotal(list1.length);\n\t\t\t\t\t\t\tsetProgress(0);\n\t\t\t\t\t\t\tfor(let i = 0; i < list2.length; i++){\n\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\tlet j = 0;\n\t\t\t\t\t\t\t\twhile(j < list1.length){\n\t\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\t\tawait sleep(2000);\n\t\t\t\t\t\t\t\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.getMutual\", \"params\":{\"source_uid\": list2[i], 'target_uids': list1.slice(j, j+100).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\t\t\t\t\tif(j > list1.length) setProgress(list1.length)\n\t\t\t\t\t\t\t\t\t\t\telse setProgress(j);\n\t\t\t\t\t\t\t\t\t\t\tfor(let j = 0; j < data.response.length; j++){\n\t\t\t\t\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\t\t\t\t\tlet c = data.response[j];\n\t\t\t\t\t\t\t\t\t\t\t\tif(c.common_count > 0){\n\t\t\t\t\t\t\t\t\t\t\t\t\tflag = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.isBanned\", \"params\":{\"uid\": c.common_friends[0], \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(data.response == 0){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetProgress(list1.length);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(list2Owner == userId){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(list2[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(list2[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(uid);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfinish();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!flag && !cancelled) step5(uid);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tj = j+100;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!flag && !cancelled) step5(uid);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t});\n\t\t\t\t\tm = m+1000;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t}\n\t\n\tconst step5 = async uid => {\n\t\tif(cancelled) return;\n\t\tlet less = filteredFriends1;\n\t\tlet more = filteredFriends2;\n\t\tlet lessUid = filteredOwner1;\n\t\tlet moreUid = filteredOwner2;\n\t\tif(filteredFriends2.length < filteredFriends1){\n\t\t\tless = filteredFriends2;\n\t\t\tmore = filteredFriends1;\n\t\t\tlessUid = filteredOwner2;\n\t\t\tmoreUid = filteredOwner1;\n\t\t}\n\t\tsetLoadingText('Получаем списки друзей:');\n\t\tsetTotal(less.length);\n\t\tsetProgress(0);\n\t\tlet i = 0;\n\t\tlet step5List = [];\n\t\twhile(i < less.length){\n\t\t\tif(cancelled) break;\n\t\t\tawait sleep(2000);\n\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.getMassFriends\", \"params\":{\"uids\": less.slice(i, i+25).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t.then(data => {\n\t\t\t\t\tif(i > less.length) setProgress(less.length)\n\t\t\t\t\telse setProgress(i);\n\t\t\t\t\tstep5List = step5List.concat(data.response);\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\thandleApiError(error);\n\t\t\t\t});\n\t\t\ti=i+25;\n\t\t}\n\t\tsetLoadingText('Фильтруем друзей:');\n\t\tsetTotal(step5List.length);\n\t\tsetProgress(0);\n\t\tfor(let p = 0; p < step5List.length; p++){\n\t\t\tif(cancelled) break;\n\t\t\tlet j = 0;\n\t\t\twhile(j < step5List[p].list.length){\n\t\t\t\tif(cancelled) break;\n\t\t\t\tawait sleep(2000);\n\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": step5List[p].list.slice(j, j+1000).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tsetProgress(p);\n\t\t\t\t\t\tstep5List[p].list = filterUsers(data.response);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t});\n\t\t\t\tj=j+1000;\n\t\t\t}\n\t\t}\n\t\tlet flag = false;\n\t\tfor(i=0;i<more.length;i++){\n\t\t\tif(flag || cancelled) break;\n\t\t\tsetLoadingText('Получаем общих друзей:');\n\t\t\tsetTotal(step5List.length);\n\t\t\tsetProgress(0);\n\t\t\tfor(let j=0;j<step5List.length;j++){\n\t\t\t\tif(flag || cancelled) break;\n\t\t\t\tlet p = 0;\n\t\t\t\twhile(p < step5List[j].list.length){\n\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\tawait sleep(2000);\n\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"friends.getMutual\", \"params\":{\"source_uid\": more[i], \"target_uids\": step5List[j].list.slice(p, p+100).join(','), \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t.then(async data => {\n\t\t\t\t\t\t\tsetProgress(j);\n\t\t\t\t\t\t\tfor(let y = 0; y < data.response.length; y++){\n\t\t\t\t\t\t\t\tif(flag || cancelled) break;\n\t\t\t\t\t\t\t\tlet c = data.response[y];\n\t\t\t\t\t\t\t\tif(c.common_count > 0){\n\t\t\t\t\t\t\t\t\tawait bridge.send('VKWebAppCallAPIMethod', {\"method\": \"execute.isBanned\", \"params\":{\"uid\": c.common_friends[0], \"v\": api_v, \"access_token\": token}})\n\t\t\t\t\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\t\t\t\t\tif(data.response == 0){\n\t\t\t\t\t\t\t\t\t\t\t\tsetProgress(step5List.length);\n\t\t\t\t\t\t\t\t\t\t\t\tif(lessUid == uid){\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(more[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.id);\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(c.common_friends[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push(more[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tresult.push(step5List[j].owner);\n\t\t\t\t\t\t\t\t\t\t\t\tresult.push(uid);\n\t\t\t\t\t\t\t\t\t\t\t\tfinish();\n\t\t\t\t\t\t\t\t\t\t\t\tflag = true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\thandleApiError(error);\n\t\t\t\t\t\t});\n\t\t\t\t\tp = p+100;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!flag && !cancelled) finish();\n\t}\n\t\n\tconst finish = () => {\n\t\tsetResState(result);\n\t\tsetPopout(<ScreenSpinner size='large' />);\n\t\tif(result.length == 1){\n\t\t\tshowError('Связи не найдены');\n\t\t\tsetActivePanel('home');\n\t\t\treturn;\n\t\t}\n\t\tbridge.send('VKWebAppCallAPIMethod', {\"method\": \"users.get\", \"params\":{\"user_ids\": result.join(','), \"fields\":\"photo_100\", \"v\": api_v, \"access_token\": token}})\n\t\t\t.then(data => {\n\t\t\t\tlet ar = [];\n\t\t\t\tfor(let i = 0; i < data.response.length; i++){\n\t\t\t\t\tlet u = data.response[i];\n\t\t\t\t\tar.push(<Link key={'l'+u.id} href={'https://vk.com/id'+u.id} target='_blank'><SimpleCell before={<Avatar src={u.photo_100} />} key={u.id}>{u.first_name}  {u.last_name}</SimpleCell></Link>);\n\t\t\t\t}\n\t\t\t\tsetPopout(null);\n\t\t\t\tsetUsers(ar);\n\t\t\t\tbridge.send(\"VKWebAppShowNativeAds\", {ad_format:\"interstitial\"});\n\t\t\t\tsetActivePanel('result');\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thandleApiError(error);\n\t\t\t});\n\t}\n\t\n\tconst sleep = ms => {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\t\n\tconst cancel = () => {\n\t\tcancelled = true;\n\t\tsetActivePanel('home');\n\t}\n\t\n\tconst filterUsers = users => {\n\t\tlet ar = [];\n\t\tfor(let i = 0; i < users.length; i++){\n\t\t\tif((!users[i].is_closed || users[i].can_access_closed) && users[i].deactivated != 'banned' && users[i].deactivated != 'deleted'){\n\t\t\t\tar.push(users[i].id);\n\t\t\t}\n\t\t}\n\t\treturn ar;\n\t}\n\t\n\tconst share = () => {\n\t\tbridge.send(\"VKWebAppShowStoryBox\", {\"background_type\":\"image\", \"url\": \"https://app.vovadev.ru/6hands/story.php?main=\"+encodeURI(resultName)+\"&sex=\"+sex+\"&uids=\"+encodeURI(resState.join(',')), \"attachment\":{\"text\":\"open\",\"type\":\"url\",\"url\":\"https://vk.com/app7900221\"}});\n\t}\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t\t\t<Home id='home' go={go} userLink={userLink} onInput={onInput} infoClick={() => setActivePanel('info')} people={people} snackbar={snackBar} />\n\t\t\t\t\t<Loading id='loading' relProgress={progress} total={loadingTotal} text={loadingText} />\n\t\t\t\t\t<Result id='result' users={users} name={resultName} back={() => setActivePanel('home')} share={share} bannerProps={bannerProps} />\n\t\t\t\t\t<Info id='info' back={() => setActivePanel('home')} />\n\t\t\t\t</View>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}